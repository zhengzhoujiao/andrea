(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d80f136"],{"0f02":function(t,s,e){},"76a1":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"Pay"},[e("statusBar"),e("topNav",[e("div",{attrs:{slot:"left"},on:{click:t.Order},slot:"left"},[e("span",{staticClass:"iconfont icon-xiangzuo",staticStyle:{"line-height":"45px","margin-left":"10px"}})]),e("div",{staticStyle:{"text-align":"center","line-height":"30px","font-size":"18px"},attrs:{slot:"mid"},slot:"mid"},[t._v(" 支付 ")]),e("div",{attrs:{slot:"right"},slot:"right"})]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.ball,expression:"ball"}],staticClass:"ballbg",on:{click:t.close}},[e("div",{attrs:{id:"snackbar"}},[e("p",{style:{color:t.colorflag?"orange":"black"},on:{click:t.wx}},[t._v(" 微信 ")]),e("p",{style:{color:t.colorflag?"black":"orange"},on:{click:t.zfb}},[t._v(" 支付宝 ")]),e("p",[t._v("取消")])])]),e("div",{staticStyle:{height:"580px",overflow:"hidden"}},[e("div",{ref:"wrapper",staticStyle:{height:"100%"}},[e("div",{staticClass:"content"},[e("div",{staticClass:"adressCard"},[e("span",{staticClass:"iconfont icon-weizhi",staticStyle:{"margin-left":"10px",display:"inline-block","line-height":"80px","font-size":"28px"}}),e("div",{staticClass:"adress"},[e("span",[t._v(t._s(this.$store.state.AdressNow.shopname))]),e("span",[t._v(t._s(this.$store.state.AdressNow.address))])]),e("span",{staticClass:"iconfont icon-youbian",staticStyle:{"vertical-align":"top",display:"inline-block","line-height":"80px","font-size":"18px"},on:{click:t.adressshop}}),e("span",{staticClass:"line"})]),t._l(this.$store.state.myOrder,(function(s,a){return e("div",{key:a,staticClass:"showCard"},[e("div",{staticClass:"title"},[e("img",{attrs:{src:s.imageurl,alt:""}}),e("div",{staticClass:"mes"},[e("p",[t._v(t._s(s.name))]),e("p",[t._v("x1")])]),e("span",{staticClass:"titprice"},[t._v("￥"+t._s(s.price))])]),e("div",{staticClass:"line2"}),e("div",{staticClass:"btn"},[e("span",[t._v("到店自取")]),e("span",[t._v("应付￥"+t._s(s.price*s.num))])])])})),e("div",{staticClass:"timeCard"},[e("span",[t._v("请选择取餐时间")]),e("div",{staticClass:"rdo"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.ched,expression:"ched"}],attrs:{type:"radio",id:"now",value:"one"},domProps:{checked:t._q(t.ched,"one")},on:{change:function(s){t.ched="one"}}}),e("label",{attrs:{for:"now"}},[t._v("现在取餐")])]),e("div",{staticClass:"rdo"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.ched,expression:"ched"}],attrs:{type:"radio",id:"ten",value:"two"},domProps:{checked:t._q(t.ched,"two")},on:{change:function(s){t.ched="two"}}}),e("label",{attrs:{for:"ten"}},[t._v("10分钟后到店取")])]),e("div",{staticClass:"rdo"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.ched,expression:"ched"}],attrs:{type:"radio",id:"twenty",value:"thr"},domProps:{checked:t._q(t.ched,"thr")},on:{change:function(s){t.ched="thr"}}}),e("label",{attrs:{for:"twenty"}},[t._v("20分钟后到店取")])]),e("div",{staticClass:"rdo"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.ched,expression:"ched"}],attrs:{type:"radio",id:"thirty",value:"four"},domProps:{checked:t._q(t.ched,"four")},on:{change:function(s){t.ched="four"}}}),e("label",{attrs:{for:"thirty"}},[t._v("30分钟后到店取")])])]),t._m(0),e("div",{staticClass:"myAdress"},[e("span",{staticClass:"left"},[t._v("收货地址")]),e("span",{staticClass:"right",on:{click:t.adress}},[t._v(">")])]),e("div",{staticClass:"PayCard"},[e("span",[t._v("支付方式")]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.paymethod,expression:"paymethod"}],staticClass:"iconfont icon-weixinzhifu"}),e("span",{directives:[{name:"show",rawName:"v-show",value:t.paymethod,expression:"paymethod"}]},[t._v("微信支付")]),e("span",{directives:[{name:"show",rawName:"v-show",value:!t.paymethod,expression:"!paymethod"}],staticClass:"iconfont icon-zhifubaozhifu",staticStyle:{color:"blue","font-size":"28px"}}),e("span",{staticClass:"iconfont icon-youbian",staticStyle:{float:"right","margin-right":"12px","margin-top":"19px","font-size":"18px"},on:{click:t.topay}})]),e("div",{staticStyle:{"margin-bottom":"60px"}},[e("span",{staticClass:"iconfont icon-gouxuan",staticStyle:{"font-size":"18px","margin-left":"12px"},style:{color:t.readcolor},on:{click:t.read}}),t._m(1)])],2)])]),e("div",{staticClass:"buNav"},[e("span",[t._v(" 合计: "),e("span",[t._v("￥"+t._s(t.sums))])]),e("div",{directives:[{name:"show",rawName:"v-show",value:1==!this.$route.query.look,expression:"!this.$route.query.look==1"}],on:{click:t.Pay}},[t._v("去支付")])])],1)},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"quanCard"},[e("span",{staticClass:"left"},[t._v("优惠券")]),e("span",{staticClass:"right"},[t._v("无可用")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("span",{staticStyle:{"font-size":"16px",display:"inline-block","margin-top":"12px","margin-left":"12px"}},[t._v(" 我已阅读并同意 "),e("span",{staticStyle:{color:"blue"}},[t._v("《支付协议》")])])}],o=(e("4160"),e("159b"),e("1fba")),n=(e("bc3a"),e("9db4")),r=e("ebd8"),c=(e("be35"),{data:function(){return{ched:"one",readcolor:"grey",flag:!1,paymethod:!0,ball:!1,colorflag:!0,address:"",myshopcarlist:[],Address:{}}},created:function(){var t=this,s={uid:window.sessionStorage.getItem("uid"),token:window.sessionStorage.getItem("token")};this.$request({url:"address/querybyuser",method:"post",data:s}).then((function(t){console.log(t)})),this.$request({url:"shop/query",method:"post",data:s}).then((function(s){t.Address=s.data,t.Address.forEach((function(s){t.$request({url:"https://restapi.amap.com/v3/direction/driving?origin=112.42759,34.60778&destination="+s.location+"&output=json&key=32afb243c6d01a86f788f6095f91b2fa",method:"get"}).then((function(e){s.distance=e.data.route.paths[0].distance,console.log(s),t.Address=t.Address.sort(t.upsort("distance"))[0],t.$store.state.AdressNow=t.Address}))}))}))},methods:{upsort:function(t){return function(s,e){return s[t]-e[t]}},close:function(){this.ball=!this.ball},wx:function(){this.paymethod=!0,this.colorflag=!0},zfb:function(){this.paymethod=!1,this.colorflag=!1},topay:function(){var t=document.getElementById("snackbar");t.className="show",this.ball=!this.ball},read:function(){console.log(1),this.flag=!this.flag,this.flag?this.readcolor="green":this.readcolor="grey"},adress:function(){this.$router.push("/Adress")},Order:function(){this.$router.push("/Order")},adressshop:function(){this.$router.push("/Map")},Pay:function(){var t=this,s=window.sessionStorage.getItem("token");if(s)if(0==this.flag)this.$messageBox("请阅读支付协议",(function(){}),this);else{this.myshopcarlist=[],this.$store.getters.getorder.forEach((function(s){var e={};e.pid=s.pid,e.number=s.num,t.myshopcarlist.push(e)}));var e={uid:window.sessionStorage.getItem("uid"),token:window.sessionStorage.getItem("token"),shopcarlist:JSON.stringify(this.myshopcarlist)};this.$request({url:"order/addorder",method:"post",data:e}).then((function(t){console.log(t)})),this.$messageBox("确定支付？",(function(){window.location.href="http://39.96.60.78:1234/order/takeorder?uid=31&token=123&sid=1&aid=1&paytype=0&appotime=2020-10-08&oid=10&successUrl=http://39.96.60.78:1234/HtmlPage1.html"}),this)}else this.$router.push("/")}},computed:{sums:function(){this.sumh=0;for(var t=0;t<this.$store.state.myOrder.length;t++)this.sumh+=this.$store.state.myOrder[t].zj;return this.sumh}},mounted:function(){this.scroller=new o["a"](this.$refs.wrapper,{tap:!0,click:!0,pullUpLoad:!0})},components:{statusBar:n["a"],topNav:r["a"]}}),l=c,d=(e("b37b"),e("2877")),h=Object(d["a"])(l,a,i,!1,null,"1101d660",null);s["default"]=h.exports},b37b:function(t,s,e){"use strict";var a=e("0f02"),i=e.n(a);i.a}}]);
//# sourceMappingURL=chunk-1d80f136.2bd06a70.js.map